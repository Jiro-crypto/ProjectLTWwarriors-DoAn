@model ProjectLTWwarriors.Models.Orders

@{
    ViewBag.Title = "Chi tiết đơn hàng";
    Layout = "~/Areas/Admin/Views/Shared/_AdminLayout.cshtml";
}

<h2>Hóa đơn mua hàng</h2>

<div class="panel panel-default">
    <div class="panel-heading">
        <strong>Mã đơn:</strong> @Model.MaDon
        | <strong>Ngày đặt:</strong> @Model.CreatedAt.ToString("dd/MM/yyyy HH:mm")
        | <strong>Trạng thái:</strong> @Model.TrangThai
    </div>
    <div class="panel-body">
        <h4>Thông tin khách hàng</h4>
        <p><strong>Họ và tên:</strong> @(Model.Users != null ? Model.Users.FullName : Model.NguoiNhanTen)</p>
        <p><strong>Số điện thoại:</strong> @Model.NguoiNhanSDT</p>
        <p><strong>Email:</strong> @(Model.Users != null ? Model.Users.Email : "")</p>
        <p><strong>Địa chỉ giao hàng:</strong> @Model.NguoiNhanDiaChi</p>
        <p><strong>Phương thức thanh toán:</strong> @Model.PhuongThucThanhToan</p>
    </div>
</div>

<h4>Chi tiết sản phẩm</h4>

<table class="table table-bordered table-striped">
    <tr>
        <th>#</th>
        <th>Sản phẩm</th>
        <th>Phân loại</th>
        <th>Số lượng</th>
        <th>Đơn giá</th>
        <th>Thành tiền</th>
    </tr>

    @{
        int i = 1;
        foreach (var item in Model.OrderItems)
        {
            <tr>
                <td>@i</td>
                <td>@item.Products.Name</td>
                <td>@item.StorageLabel @* + màu nếu cần: (@item.ColorHex) *@</td>
                <td>@item.Qty</td>
                <td>@String.Format("{0:N0}đ", item.UnitPrice)</td>
                <td>@String.Format("{0:N0}đ", item.LineTotal)</td>
            </tr>
            i++;
        }
    }
</table>

<div class="row">
    <div class="col-md-6 col-md-offset-6">
        <table class="table">
            <tr>
                <th style="width:50%;">Tạm tính:</th>
                <td>@String.Format("{0:N0}đ", Model.Subtotal)</td>
            </tr>
            <tr>
                <th>Giảm giá:</th>
                <td>@String.Format("{0:N0}đ", Model.GiamGia)</td>
            </tr>
            <tr>
                <th>Phí vận chuyển:</th>
                <td>@String.Format("{0:N0}đ", Model.PhiVanChuyen)</td>
            </tr>
            <tr>
                <th><strong>Tổng cộng:</strong></th>
                <td><strong>@String.Format("{0:N0}đ", Model.TongCong)</strong></td>
            </tr>
        </table>
    </div>
</div>

<div>
    @Html.ActionLink("Quay lại danh sách", "Index", "OrderManagement", null, new { @class = "btn btn-info btn-sm" })
</div>
